# Zn
A minimalistic OpenComputers p2p network.

All Zn traffic is transferred by members of network. No central server is needed.
The library dispatches messages, and generates events for messages addressed to cliend or broadcasted to entire net.

The network structure can be volatile and changed dynamically. By default it uses `419` modem port to communicate.

Zn network provides "network layer" according to [OSI model](https://en.wikipedia.org/wiki/OSI_model).
On top of Zn network, you can build transport protocol, similar to TCP/UDP e.t.c.

## Installation
Run this command from terminal:

```
hpm install zn
```

## API
* `zn.connect()`

Registers Zn network listener. This allows a computer to be a part of Zn network, and send/receive network messages.

* `zn.send(address: string, message: string, [hash: string])`

Sends given `message` to `address` (component address of modem, used by receiver).
You can specify `hash`, used to unique identify this message in the network. Otherwise, it will be auto-generated by library.

* `zn.broadcast(message: string, [hash: string])`

The same, as `zn.send`, but the message will be delivered to every member of the net.

* `zn.disconnect()`

Removes Zn listener, and disconnects from the net.

## Events

* `zn_message(message: string)`

This event is generated every time client receives a message addressed to him (or broadcasted to entire net).

## Example
```lua
local event = require('event')
local zn = require('zn')

zn.connect()

zn.broadcast("Hello Zn members!")

while true do
  local _, message = event.pull("zn_message")
  if message == "bye" then
    break
  else
    print(message)
  end
end

zn.disconnect()
```
